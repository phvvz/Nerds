const modal=document.querySelector(".modal"),clickModalShow=document.querySelector(".map-contact__btn"),clickCloseModal=modal.querySelector(".btn-close"),form=modal.querySelector("form"),userName=modal.querySelector("[name=name]"),userEmail=modal.querySelector("[name=email]"),userText=modal.querySelector("[name=text]"),overlay=document.querySelector(".overlay");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}clickModalShow.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal_show"),overlay.classList.add("overlay_show"),storage?(userName.value=storage,userEmail.focus()):userName.focus()}),clickCloseModal.addEventListener("click",function(){modal.classList.remove("modal_show","modal-error"),overlay.classList.remove("overlay_show"),modal.offsetWidth=modal.offsetWidth,modal.classList.contains("modal_show")||localStorage.removeItem("name")}),form.addEventListener("submit",function(e){userName.value&&userEmail.value&&userText.value?isStorageSupport&&localStorage.setItem("name",userName.value):(modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error"),e.preventDefault())}),window.addEventListener("keydown",function(e){27===e.keyCode&&modal.classList.contains("modal_show")&&(e.preventDefault(),modal.classList.remove("modal_show","modal-error"),overlay.classList.remove("overlay_show"))}),window.addEventListener("click",function(){modal.classList.remove("modal-show")});
